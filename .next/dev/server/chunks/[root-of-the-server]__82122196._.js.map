{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma?: PrismaClient\r\n}\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"error\", \"warn\"]\r\n        : [\"error\"],\r\n  })\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  globalForPrisma.prisma = prisma\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;KAAO,GACjB;AACR;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/lib/session.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\r\nimport crypto from \"crypto\"\r\nimport { prisma } from \"./prisma\"\r\nimport type { Session, User } from \"@prisma/client\"\r\n\r\nconst SESSION_COOKIE = \"session_token\"\r\nconst SESSION_MAX_AGE_SECONDS = 60 * 60 * 24 * 30 // 30 days\r\n\r\nexport type SessionWithUser = Session & {\r\n  user: User & {\r\n    organization: { id: string; name: string; isRejected: boolean } | null\r\n  }\r\n}\r\n\r\nexport function serializeUser(\r\n  user: User & { organization?: { id: string; name: string; isRejected?: boolean } | null },\r\n) {\r\n  const { passwordHash: _passwordHash, ...safeUser } = user\r\n\r\n  return {\r\n    ...safeUser,\r\n    organization: user.organization\r\n      ? {\r\n          id: user.organization.id,\r\n          name: user.organization.name,\r\n          isRejected: Boolean(user.organization.isRejected),\r\n        }\r\n      : null,\r\n  }\r\n}\r\n\r\nexport async function getSession(): Promise<SessionWithUser | null> {\r\n  const cookieStore = await cookies()\r\n  const token = cookieStore.get(SESSION_COOKIE)?.value\r\n  if (!token) return null\r\n\r\n  const session = await prisma.session.findUnique({\r\n    where: { token },\r\n    include: {\r\n      user: {\r\n        include: {\r\n          organization: {\r\n            select: { id: true, name: true, isRejected: true },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  })\r\n\r\n  if (!session) {\r\n    cookieStore.delete(SESSION_COOKIE)\r\n    return null\r\n  }\r\n\r\n  if (session.expiresAt < new Date()) {\r\n    await prisma.session.delete({ where: { token } })\r\n    cookieStore.delete(SESSION_COOKIE)\r\n    return null\r\n  }\r\n\r\n  return session as SessionWithUser\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n  const session = await getSession()\r\n  return session ? serializeUser(session.user) : null\r\n}\r\n\r\nexport async function createSession(userId: string) {\r\n  const token = crypto.randomUUID()\r\n  const expiresAt = new Date(Date.now() + SESSION_MAX_AGE_SECONDS * 1000)\r\n\r\n  await prisma.session.create({\r\n    data: {\r\n      token,\r\n      userId,\r\n      expiresAt,\r\n    },\r\n  })\r\n\r\n  const cookieStore = await cookies()\r\n  cookieStore.set(SESSION_COOKIE, token, {\r\n    httpOnly: true,\r\n    sameSite: \"lax\",\r\n    secure: process.env.NODE_ENV === \"production\",\r\n    maxAge: SESSION_MAX_AGE_SECONDS,\r\n    path: \"/\",\r\n  })\r\n\r\n  return token\r\n}\r\n\r\nexport async function clearSession() {\r\n  const cookieStore = await cookies()\r\n  const token = cookieStore.get(SESSION_COOKIE)?.value\r\n\r\n  if (token) {\r\n    await prisma.session.deleteMany({ where: { token } })\r\n  }\r\n\r\n  cookieStore.delete(SESSION_COOKIE)\r\n}\r\n\r\nexport async function requireUser() {\r\n  const user = await getCurrentUser()\r\n  if (!user) {\r\n    throw new Error(\"UNAUTHENTICATED\")\r\n  }\r\n  return user\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;;;;AAGA,MAAM,iBAAiB;AACvB,MAAM,0BAA0B,KAAK,KAAK,KAAK,GAAG,UAAU;;AAQrD,SAAS,cACd,IAAyF;IAEzF,MAAM,EAAE,cAAc,aAAa,EAAE,GAAG,UAAU,GAAG;IAErD,OAAO;QACL,GAAG,QAAQ;QACX,cAAc,KAAK,YAAY,GAC3B;YACE,IAAI,KAAK,YAAY,CAAC,EAAE;YACxB,MAAM,KAAK,YAAY,CAAC,IAAI;YAC5B,YAAY,QAAQ,KAAK,YAAY,CAAC,UAAU;QAClD,IACA;IACN;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,iBAAiB;IAC/C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,UAAU,MAAM,0JAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QAC9C,OAAO;YAAE;QAAM;QACf,SAAS;YACP,MAAM;gBACJ,SAAS;oBACP,cAAc;wBACZ,QAAQ;4BAAE,IAAI;4BAAM,MAAM;4BAAM,YAAY;wBAAK;oBACnD;gBACF;YACF;QACF;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,YAAY,MAAM,CAAC;QACnB,OAAO;IACT;IAEA,IAAI,QAAQ,SAAS,GAAG,IAAI,QAAQ;QAClC,MAAM,0JAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;QAC/C,YAAY,MAAM,CAAC;QACnB,OAAO;IACT;IAEA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,UAAU,MAAM;IACtB,OAAO,UAAU,cAAc,QAAQ,IAAI,IAAI;AACjD;AAEO,eAAe,cAAc,MAAc;IAChD,MAAM,QAAQ,gHAAM,CAAC,UAAU;IAC/B,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,0BAA0B;IAElE,MAAM,0JAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1B,MAAM;YACJ;YACA;YACA;QACF;IACF;IAEA,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,YAAY,GAAG,CAAC,gBAAgB,OAAO;QACrC,UAAU;QACV,UAAU;QACV,QAAQ,oDAAyB;QACjC,QAAQ;QACR,MAAM;IACR;IAEA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,iBAAiB;IAE/C,IAAI,OAAO;QACT,MAAM,0JAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;IACrD;IAEA,YAAY,MAAM,CAAC;AACrB;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/lib/auth-server.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\r\nimport \"server-only\"\r\nimport { NextResponse } from \"next/server\"\r\nimport { randomUUID } from \"crypto\"\r\nimport { SignJWT, jwtVerify } from \"jose\"\r\nimport bcrypt from \"bcryptjs\"\r\nimport { prisma } from \"./prisma\"\r\nimport { UserRole } from \"@prisma/client\"\r\n\r\nconst SESSION_COOKIE = \"session_token\"\r\nconst SESSION_DURATION_MS = 1000 * 60 * 60 * 24 * 7\r\n\r\nfunction getSecret() {\r\n  const secret = process.env.JWT_SECRET\r\n  if (!secret) {\r\n    throw new Error(\"Missing JWT_SECRET\")\r\n  }\r\n  return new TextEncoder().encode(secret)\r\n}\r\n\r\nexport async function hashPassword(password: string) {\r\n  return bcrypt.hash(password, 10)\r\n}\r\n\r\nexport async function verifyPassword(password: string, hash: string) {\r\n  return bcrypt.compare(password, hash)\r\n}\r\n\r\nexport async function createAuthSession(userId: string, role: UserRole) {\r\n  const token = randomUUID()\r\n  const expiresAt = new Date(Date.now() + SESSION_DURATION_MS)\r\n\r\n  await prisma.session.create({\r\n    data: {\r\n      token,\r\n      userId,\r\n      expiresAt,\r\n    },\r\n  })\r\n\r\n  const jwt = await new SignJWT({ token, role })\r\n    .setProtectedHeader({ alg: \"HS256\" })\r\n    .setExpirationTime(expiresAt)\r\n    .sign(getSecret())\r\n\r\n  const cookieStore = await cookies()\r\n  cookieStore.set(SESSION_COOKIE, jwt, {\r\n    httpOnly: true,\r\n    sameSite: \"lax\",\r\n    expires: expiresAt,\r\n    path: \"/\",\r\n    secure: process.env.NODE_ENV === \"production\",\r\n  })\r\n  return token\r\n}\r\n\r\nexport async function clearSession() {\r\n  const cookieStore = await cookies()\r\n  const token = cookieStore.get(SESSION_COOKIE)?.value\r\n  if (token) {\r\n    await prisma.session.deleteMany({ where: { token } })\r\n  }\r\n  cookieStore.delete(SESSION_COOKIE)\r\n}\r\n\r\nexport async function getSessionUser() {\r\n  const cookieStore = await cookies()\r\n  const jwt = cookieStore.get(SESSION_COOKIE)?.value\r\n  if (!jwt) return null\r\n\r\n  try {\r\n    const { payload } = await jwtVerify(jwt, getSecret())\r\n    const token = payload.token as string\r\n    if (!token) return null\r\n    const session = await prisma.session.findUnique({\r\n      where: { token },\r\n      include: {\r\n        user: {\r\n          include: { organization: { select: { id: true, name: true, isRejected: true } } },\r\n        },\r\n      },\r\n    })\r\n    if (!session || session.expiresAt < new Date()) {\r\n      return null\r\n    }\r\n    if (session.user.status === \"suspended\") {\r\n      await prisma.session.deleteMany({ where: { token } })\r\n      cookieStore.delete(SESSION_COOKIE)\r\n      return null\r\n    }\r\n    return session.user\r\n  } catch {\r\n    return null\r\n  }\r\n}\r\n\r\nexport function requireRole(userRole: UserRole, allowed: UserRole[]) {\r\n  if (!allowed.includes(userRole)) {\r\n    return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\r\n  }\r\n  return null\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;AAGA,MAAM,iBAAiB;AACvB,MAAM,sBAAsB,OAAO,KAAK,KAAK,KAAK;AAElD,SAAS;IACP,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU;IACrC,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAI,cAAc,MAAM,CAAC;AAClC;AAEO,eAAe,aAAa,QAAgB;IACjD,OAAO,+KAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,eAAe,QAAgB,EAAE,IAAY;IACjE,OAAO,+KAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,eAAe,kBAAkB,MAAc,EAAE,IAAc;IACpE,MAAM,QAAQ,IAAA,mHAAU;IACxB,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK;IAExC,MAAM,0JAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1B,MAAM;YACJ;YACA;YACA;QACF;IACF;IAEA,MAAM,MAAM,MAAM,IAAI,wMAAO,CAAC;QAAE;QAAO;IAAK,GACzC,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,iBAAiB,CAAC,WAClB,IAAI,CAAC;IAER,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,YAAY,GAAG,CAAC,gBAAgB,KAAK;QACnC,UAAU;QACV,UAAU;QACV,SAAS;QACT,MAAM;QACN,QAAQ,oDAAyB;IACnC;IACA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,iBAAiB;IAC/C,IAAI,OAAO;QACT,MAAM,0JAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;IACrD;IACA,YAAY,MAAM,CAAC;AACrB;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,6KAAO;IACjC,MAAM,MAAM,YAAY,GAAG,CAAC,iBAAiB;IAC7C,IAAI,CAAC,KAAK,OAAO;IAEjB,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,4MAAS,EAAC,KAAK;QACzC,MAAM,QAAQ,QAAQ,KAAK;QAC3B,IAAI,CAAC,OAAO,OAAO;QACnB,MAAM,UAAU,MAAM,0JAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE;YAAM;YACf,SAAS;gBACP,MAAM;oBACJ,SAAS;wBAAE,cAAc;4BAAE,QAAQ;gCAAE,IAAI;gCAAM,MAAM;gCAAM,YAAY;4BAAK;wBAAE;oBAAE;gBAClF;YACF;QACF;QACA,IAAI,CAAC,WAAW,QAAQ,SAAS,GAAG,IAAI,QAAQ;YAC9C,OAAO;QACT;QACA,IAAI,QAAQ,IAAI,CAAC,MAAM,KAAK,aAAa;YACvC,MAAM,0JAAM,CAAC,OAAO,CAAC,UAAU,CAAC;gBAAE,OAAO;oBAAE;gBAAM;YAAE;YACnD,YAAY,MAAM,CAAC;YACnB,OAAO;QACT;QACA,OAAO,QAAQ,IAAI;IACrB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,YAAY,QAAkB,EAAE,OAAmB;IACjE,IAAI,CAAC,QAAQ,QAAQ,CAAC,WAAW;QAC/B,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAY,GAAG;YAAE,QAAQ;QAAI;IACjE;IACA,OAAO;AACT"}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/lib/services/auth.ts"],"sourcesContent":["import \"server-only\"\r\n\r\nimport bcrypt from \"bcryptjs\"\r\nimport { z } from \"zod\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { serializeUser } from \"@/lib/session\"\r\nimport { clearSession, createAuthSession, getSessionUser } from \"@/lib/auth-server\"\r\n\r\nconst registerSchema = z.object({\r\n  role: z.enum([\"customer\", \"installer\"]),\r\n  email: z.string().email(),\r\n  password: z.string().min(8),\r\n  name: z.string(),\r\n  phone: z.string().optional(),\r\n  address: z.string().optional(),\r\n  companyName: z.string().optional(),\r\n  description: z.string().optional(),\r\n})\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email(),\r\n  password: z.string().min(1),\r\n})\r\n\r\nexport type PublicUser = ReturnType<typeof serializeUser>\r\n\r\nexport async function registerUser(input: unknown) {\r\n  const data = registerSchema.parse(input)\r\n\r\n  const existing = await prisma.user.findUnique({ where: { email: data.email } })\r\n  if (existing) {\r\n    throw new Error(\"An account with this email already exists\")\r\n  }\r\n\r\n  const passwordHash = await bcrypt.hash(data.password, 10)\r\n\r\n  let organizationId: string | undefined\r\n  if (data.role === \"installer\") {\r\n    const organization = await prisma.organization.create({\r\n      data: {\r\n        name: data.companyName || `${data.name}'s Solar`,\r\n        description: data.description,\r\n        verified: false,\r\n      },\r\n    })\r\n    organizationId = organization.id\r\n  }\r\n\r\n  const user = await prisma.user.create({\r\n    data: {\r\n      email: data.email,\r\n      name: data.name,\r\n      role: data.role,\r\n      status: \"active\",\r\n      phone: data.phone,\r\n      address: data.address,\r\n      passwordHash,\r\n      organizationId,\r\n      verified: data.role === \"customer\",\r\n    },\r\n    include: { organization: { select: { id: true, name: true, isRejected: true } } },\r\n  })\r\n\r\n  await createAuthSession(user.id, user.role)\r\n\r\n  return serializeUser(user)\r\n}\r\n\r\nexport async function loginUser(input: unknown) {\r\n  const data = loginSchema.parse(input)\r\n\r\n  const user = await prisma.user.findUnique({\r\n    where: { email: data.email },\r\n    include: { organization: { select: { id: true, name: true, isRejected: true } } },\r\n  })\r\n\r\n  if (!user) {\r\n    throw new Error(\"Invalid credentials\")\r\n  }\r\n\r\n  const isValid = await bcrypt.compare(data.password, user.passwordHash)\r\n  if (!isValid) {\r\n    throw new Error(\"Invalid credentials\")\r\n  }\r\n\r\n  await createAuthSession(user.id, user.role)\r\n  return serializeUser(user)\r\n}\r\n\r\nexport async function logoutUser() {\r\n  await clearSession()\r\n}\r\n\r\nexport async function currentUser() {\r\n  const user = await getSessionUser()\r\n  if (!user) return null\r\n\r\n  const fullUser = await prisma.user.findUnique({\r\n    where: { id: user.id },\r\n    include: { organization: { select: { id: true, name: true, isRejected: true } } },\r\n  })\r\n\r\n  return fullUser ? serializeUser(fullUser) : null\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/app/api/bids/route.ts"],"sourcesContent":["import { addHours } from \"date-fns\"\r\nimport { NextResponse } from \"next/server\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { currentUser } from \"@/lib/services/auth\"\r\n\r\nexport const dynamic = \"force-dynamic\"\r\n\r\nfunction mapBid(bid: any, applicationReference: string) {\r\n  return {\r\n    id: bid.id,\r\n    applicationId: applicationReference,\r\n    installerId: bid.organizationId,\r\n    installerName: bid.organization?.name || \"Installer\",\r\n    packageName: bid.package?.name,\r\n    contact: {\r\n      email: bid.installer?.email,\r\n      phone: bid.installer?.phone || bid.organization?.phone,\r\n    },\r\n    installerRating: bid.organization?.rating,\r\n    completedProjects: bid.organization?.completedInstallations,\r\n    price: bid.price,\r\n    proposal: bid.proposal,\r\n    warranty: bid.warranty,\r\n    estimatedDays: bid.estimatedDays,\r\n    createdAt: bid.createdAt,\r\n    status: bid.status,\r\n  }\r\n}\r\n\r\nfunction mapSession(session: any) {\r\n  const details = session.application?.technicalDetails || {}\r\n  const acceptedBid = session.bids.find((bid: any) => bid.status === \"accepted\")\r\n  const selectedPackage =\r\n    session.selectedPackage ?? session.application?.selectedPackage ?? null\r\n\r\n  return {\r\n    id: session.id,\r\n    applicationId: session.application.reference,\r\n    customerId: session.customerId,\r\n    startedAt: session.startedAt,\r\n    expiresAt: session.expiresAt,\r\n    status: session.status,\r\n    bidType: session.bidType ?? \"open\",\r\n    requirements: session.requirements ?? null,\r\n    maxBudget: session.maxBudget ?? null,\r\n    selectedBidId: acceptedBid?.id,\r\n    applicationDetails: {\r\n      address:\r\n        details.siteAddress ||\r\n        details.address ||\r\n        session.application.customer?.address ||\r\n        \"Address not provided\",\r\n      capacity:\r\n        details.desiredCapacity ||\r\n        details.systemCapacity ||\r\n        details.capacity ||\r\n        \"Capacity TBD\",\r\n      customerPhone: session.application.customer?.phone,\r\n      customerEmail: session.application.customer?.email,\r\n      selectedPackageName: selectedPackage?.name,\r\n      selectedPackagePrice: selectedPackage?.price,\r\n    },\r\n    bids: session.bids.map((bid: any) => mapBid(bid, session.application.reference)),\r\n  }\r\n}\r\n\r\nexport async function GET() {\r\n  const user = await currentUser()\r\n  if (!user) {\r\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\r\n  }\r\n\r\n  const sessions = await prisma.bidSession.findMany({\r\n    where:\r\n      user.role === \"customer\"\r\n        ? { customerId: user.id }\r\n        : user.role === \"installer\" && user.organization\r\n        ? {\r\n            OR: [\r\n              { status: \"open\" },\r\n              { bids: { some: { organizationId: user.organization.id } } },\r\n            ],\r\n          }\r\n        : undefined,\r\n    include: {\r\n      application: { include: { customer: true, selectedPackage: true } },\r\n      selectedPackage: true,\r\n      bids: {\r\n        include: {\r\n          installer: true,\r\n          organization: true,\r\n          package: true,\r\n        },\r\n      },\r\n    },\r\n    orderBy: { startedAt: \"desc\" },\r\n  })\r\n\r\n  return NextResponse.json({\r\n    bidSessions: sessions.map(mapSession),\r\n  })\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  const user = await currentUser()\r\n  if (!user) {\r\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\r\n  }\r\n\r\n  const body = await request.json().catch(() => null)\r\n  if (!body || typeof body !== \"object\") {\r\n    return NextResponse.json({ error: \"Invalid JSON body\" }, { status: 400 })\r\n  }\r\n\r\n  // ✅ IMPORTANT: your UI sends applicationId = application.reference\r\n  const application = await prisma.application.findFirst({\r\n    where: { reference: body.applicationId },\r\n  })\r\n\r\n  if (!application) {\r\n    return NextResponse.json({ error: \"Application not found\" }, { status: 404 })\r\n  }\r\n\r\n  // ✅ Security: customer can only open bids for own application\r\n  if (user.role === \"customer\" && application.customerId !== user.id) {\r\n    return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\r\n  }\r\n\r\n  // ✅ Customer opens or extends a bid session\r\n  if (user.role === \"customer\") {\r\n    // Only allow bidding for approved applications (change if you want)\r\n    if (application.status !== \"approved\") {\r\n      return NextResponse.json(\r\n        { error: \"Only approved applications can open bid sessions.\" },\r\n        { status: 400 },\r\n      )\r\n    }\r\n\r\n    // ✅ Support both:\r\n    // - durationHours (your UI)\r\n    // - expiresInDays (older code)\r\n    const durationHoursRaw =\r\n      body.durationHours != null ? Number(body.durationHours) : null\r\n\r\n    const expiresInDaysRaw =\r\n      body.expiresInDays != null ? Number(body.expiresInDays) : null\r\n\r\n    const durationHours =\r\n      durationHoursRaw && Number.isFinite(durationHoursRaw) && durationHoursRaw > 0\r\n        ? durationHoursRaw\r\n        : (expiresInDaysRaw && Number.isFinite(expiresInDaysRaw) && expiresInDaysRaw > 0\r\n            ? expiresInDaysRaw * 24\r\n            : 2 * 24) // fallback 48h\r\n\r\n    // optional limit (ex: max 14 days)\r\n    if (durationHours > 24 * 14) {\r\n      return NextResponse.json({ error: \"Duration too long.\" }, { status: 400 })\r\n    }\r\n\r\n    const existing = await prisma.bidSession.findFirst({\r\n      where: { applicationId: application.id },\r\n      include: {\r\n        application: { include: { customer: true, selectedPackage: true } },\r\n        selectedPackage: true,\r\n        bids: {\r\n          include: {\r\n            installer: true,\r\n            organization: true,\r\n            package: true,\r\n          },\r\n        },\r\n      },\r\n    })\r\n\r\n    const session = existing\r\n      ? await prisma.bidSession.update({\r\n          where: { id: existing.id },\r\n          data: {\r\n            status: \"open\",\r\n            bidType: body.bidType ?? existing.bidType,\r\n            requirements: body.requirements ?? existing.requirements,\r\n            maxBudget: body.maxBudget ?? existing.maxBudget,\r\n            selectedPackageId: body.selectedPackageId ?? existing.selectedPackageId,\r\n            // ✅ FIX: use durationHours (not expiresInDays default)\r\n            expiresAt: addHours(new Date(), durationHours),\r\n          },\r\n          include: {\r\n            application: { include: { customer: true, selectedPackage: true } },\r\n            selectedPackage: true,\r\n            bids: {\r\n              include: {\r\n                installer: true,\r\n                organization: true,\r\n                package: true,\r\n              },\r\n            },\r\n          },\r\n        })\r\n      : await prisma.bidSession.create({\r\n          data: {\r\n            applicationId: application.id,\r\n            customerId: application.customerId,\r\n            status: \"open\",\r\n            bidType: body.bidType ?? \"open\",\r\n            requirements: body.requirements ?? null,\r\n            maxBudget: body.maxBudget ?? null,\r\n            selectedPackageId: body.selectedPackageId ?? null,\r\n            startedAt: new Date(),\r\n            // ✅ FIX: use durationHours (not expiresInDays default)\r\n            expiresAt: addHours(new Date(), durationHours),\r\n          },\r\n          include: {\r\n            application: { include: { customer: true, selectedPackage: true } },\r\n            selectedPackage: true,\r\n            bids: {\r\n              include: {\r\n                installer: true,\r\n                organization: true,\r\n                package: true,\r\n              },\r\n            },\r\n          },\r\n        })\r\n\r\n    return NextResponse.json({ bidSession: mapSession(session) }, { status: 201 })\r\n  }\r\n\r\n  // ✅ Installer submits a bid\r\n  if (user.role !== \"installer\" || !user.organization) {\r\n    return NextResponse.json({ error: \"Only installers can submit bids\" }, { status: 403 })\r\n  }\r\n  if (user.verified === false) {\r\n    return NextResponse.json(\r\n      { error: \"Installer account is pending verification.\" },\r\n      { status: 403 },\r\n    )\r\n  }\r\n\r\n  const session =\r\n    (body.bidSessionId &&\r\n      (await prisma.bidSession.findUnique({\r\n        where: { id: body.bidSessionId },\r\n        include: { application: true, selectedPackage: true },\r\n      }))) ||\r\n    (await prisma.bidSession.findFirst({\r\n      where: { applicationId: application.id },\r\n      include: { application: true, selectedPackage: true },\r\n    })) ||\r\n    (await prisma.bidSession.create({\r\n      data: {\r\n        applicationId: application.id,\r\n        customerId: application.customerId,\r\n        status: \"open\",\r\n        bidType: body.bidType ?? \"open\",\r\n        requirements: body.requirements ?? null,\r\n        maxBudget: body.maxBudget ?? null,\r\n        selectedPackageId: body.selectedPackageId ?? null,\r\n        startedAt: new Date(),\r\n        expiresAt: addHours(new Date(), 48),\r\n      },\r\n      include: { application: true, selectedPackage: true },\r\n    }))\r\n\r\n  const numericPrice = Number(body.price)\r\n  if (\r\n    session.maxBudget !== null &&\r\n    session.maxBudget !== undefined &&\r\n    numericPrice > session.maxBudget\r\n  ) {\r\n    return NextResponse.json(\r\n      { error: \"Bid price exceeds the maximum budget for this session.\" },\r\n      { status: 400 },\r\n    )\r\n  }\r\n\r\n  const bid = await prisma.bid.create({\r\n    data: {\r\n      applicationId: application.id,\r\n      bidSessionId: session.id,\r\n      installerId: user.id,\r\n      organizationId: user.organization.id,\r\n      packageId: body.packageId,\r\n      price: numericPrice,\r\n      proposal: body.proposal || \"Installer proposal\",\r\n      warranty: body.warranty || \"Standard warranty\",\r\n      estimatedDays: body.estimatedDays || 7,\r\n      status: \"pending\",\r\n    },\r\n    include: {\r\n      installer: true,\r\n      organization: true,\r\n      package: true,\r\n    },\r\n  })\r\n\r\n  return NextResponse.json({ bid: mapBid(bid, application.reference) }, { status: 201 })\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,MAAM,UAAU;AAEvB,SAAS,OAAO,GAAQ,EAAE,oBAA4B;IACpD,OAAO;QACL,IAAI,IAAI,EAAE;QACV,eAAe;QACf,aAAa,IAAI,cAAc;QAC/B,eAAe,IAAI,YAAY,EAAE,QAAQ;QACzC,aAAa,IAAI,OAAO,EAAE;QAC1B,SAAS;YACP,OAAO,IAAI,SAAS,EAAE;YACtB,OAAO,IAAI,SAAS,EAAE,SAAS,IAAI,YAAY,EAAE;QACnD;QACA,iBAAiB,IAAI,YAAY,EAAE;QACnC,mBAAmB,IAAI,YAAY,EAAE;QACrC,OAAO,IAAI,KAAK;QAChB,UAAU,IAAI,QAAQ;QACtB,UAAU,IAAI,QAAQ;QACtB,eAAe,IAAI,aAAa;QAChC,WAAW,IAAI,SAAS;QACxB,QAAQ,IAAI,MAAM;IACpB;AACF;AAEA,SAAS,WAAW,OAAY;IAC9B,MAAM,UAAU,QAAQ,WAAW,EAAE,oBAAoB,CAAC;IAC1D,MAAM,cAAc,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,MAAa,IAAI,MAAM,KAAK;IACnE,MAAM,kBACJ,QAAQ,eAAe,IAAI,QAAQ,WAAW,EAAE,mBAAmB;IAErE,OAAO;QACL,IAAI,QAAQ,EAAE;QACd,eAAe,QAAQ,WAAW,CAAC,SAAS;QAC5C,YAAY,QAAQ,UAAU;QAC9B,WAAW,QAAQ,SAAS;QAC5B,WAAW,QAAQ,SAAS;QAC5B,QAAQ,QAAQ,MAAM;QACtB,SAAS,QAAQ,OAAO,IAAI;QAC5B,cAAc,QAAQ,YAAY,IAAI;QACtC,WAAW,QAAQ,SAAS,IAAI;QAChC,eAAe,aAAa;QAC5B,oBAAoB;YAClB,SACE,QAAQ,WAAW,IACnB,QAAQ,OAAO,IACf,QAAQ,WAAW,CAAC,QAAQ,EAAE,WAC9B;YACF,UACE,QAAQ,eAAe,IACvB,QAAQ,cAAc,IACtB,QAAQ,QAAQ,IAChB;YACF,eAAe,QAAQ,WAAW,CAAC,QAAQ,EAAE;YAC7C,eAAe,QAAQ,WAAW,CAAC,QAAQ,EAAE;YAC7C,qBAAqB,iBAAiB;YACtC,sBAAsB,iBAAiB;QACzC;QACA,MAAM,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAa,OAAO,KAAK,QAAQ,WAAW,CAAC,SAAS;IAChF;AACF;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,IAAA,yKAAW;IAC9B,IAAI,CAAC,MAAM;QACT,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,WAAW,MAAM,0JAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;QAChD,OACE,KAAK,IAAI,KAAK,aACV;YAAE,YAAY,KAAK,EAAE;QAAC,IACtB,KAAK,IAAI,KAAK,eAAe,KAAK,YAAY,GAC9C;YACE,IAAI;gBACF;oBAAE,QAAQ;gBAAO;gBACjB;oBAAE,MAAM;wBAAE,MAAM;4BAAE,gBAAgB,KAAK,YAAY,CAAC,EAAE;wBAAC;oBAAE;gBAAE;aAC5D;QACH,IACA;QACN,SAAS;YACP,aAAa;gBAAE,SAAS;oBAAE,UAAU;oBAAM,iBAAiB;gBAAK;YAAE;YAClE,iBAAiB;YACjB,MAAM;gBACJ,SAAS;oBACP,WAAW;oBACX,cAAc;oBACd,SAAS;gBACX;YACF;QACF;QACA,SAAS;YAAE,WAAW;QAAO;IAC/B;IAEA,OAAO,iLAAY,CAAC,IAAI,CAAC;QACvB,aAAa,SAAS,GAAG,CAAC;IAC5B;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,OAAO,MAAM,IAAA,yKAAW;IAC9B,IAAI,CAAC,MAAM;QACT,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,OAAO,MAAM,QAAQ,IAAI,GAAG,KAAK,CAAC,IAAM;IAC9C,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;QACrC,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACzE;IAEA,mEAAmE;IACnE,MAAM,cAAc,MAAM,0JAAM,CAAC,WAAW,CAAC,SAAS,CAAC;QACrD,OAAO;YAAE,WAAW,KAAK,aAAa;QAAC;IACzC;IAEA,IAAI,CAAC,aAAa;QAChB,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;IAEA,8DAA8D;IAC9D,IAAI,KAAK,IAAI,KAAK,cAAc,YAAY,UAAU,KAAK,KAAK,EAAE,EAAE;QAClE,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAY,GAAG;YAAE,QAAQ;QAAI;IACjE;IAEA,4CAA4C;IAC5C,IAAI,KAAK,IAAI,KAAK,YAAY;QAC5B,oEAAoE;QACpE,IAAI,YAAY,MAAM,KAAK,YAAY;YACrC,OAAO,iLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoD,GAC7D;gBAAE,QAAQ;YAAI;QAElB;QAEA,kBAAkB;QAClB,4BAA4B;QAC5B,+BAA+B;QAC/B,MAAM,mBACJ,KAAK,aAAa,IAAI,OAAO,OAAO,KAAK,aAAa,IAAI;QAE5D,MAAM,mBACJ,KAAK,aAAa,IAAI,OAAO,OAAO,KAAK,aAAa,IAAI;QAE5D,MAAM,gBACJ,oBAAoB,OAAO,QAAQ,CAAC,qBAAqB,mBAAmB,IACxE,mBACC,oBAAoB,OAAO,QAAQ,CAAC,qBAAqB,mBAAmB,IACzE,mBAAmB,KACnB,IAAI,GAAI,eAAe;;QAEjC,mCAAmC;QACnC,IAAI,gBAAgB,KAAK,IAAI;YAC3B,OAAO,iLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QAEA,MAAM,WAAW,MAAM,0JAAM,CAAC,UAAU,CAAC,SAAS,CAAC;YACjD,OAAO;gBAAE,eAAe,YAAY,EAAE;YAAC;YACvC,SAAS;gBACP,aAAa;oBAAE,SAAS;wBAAE,UAAU;wBAAM,iBAAiB;oBAAK;gBAAE;gBAClE,iBAAiB;gBACjB,MAAM;oBACJ,SAAS;wBACP,WAAW;wBACX,cAAc;wBACd,SAAS;oBACX;gBACF;YACF;QACF;QAEA,MAAM,UAAU,WACZ,MAAM,0JAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,OAAO;gBAAE,IAAI,SAAS,EAAE;YAAC;YACzB,MAAM;gBACJ,QAAQ;gBACR,SAAS,KAAK,OAAO,IAAI,SAAS,OAAO;gBACzC,cAAc,KAAK,YAAY,IAAI,SAAS,YAAY;gBACxD,WAAW,KAAK,SAAS,IAAI,SAAS,SAAS;gBAC/C,mBAAmB,KAAK,iBAAiB,IAAI,SAAS,iBAAiB;gBACvE,uDAAuD;gBACvD,WAAW,IAAA,sLAAQ,EAAC,IAAI,QAAQ;YAClC;YACA,SAAS;gBACP,aAAa;oBAAE,SAAS;wBAAE,UAAU;wBAAM,iBAAiB;oBAAK;gBAAE;gBAClE,iBAAiB;gBACjB,MAAM;oBACJ,SAAS;wBACP,WAAW;wBACX,cAAc;wBACd,SAAS;oBACX;gBACF;YACF;QACF,KACA,MAAM,0JAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,MAAM;gBACJ,eAAe,YAAY,EAAE;gBAC7B,YAAY,YAAY,UAAU;gBAClC,QAAQ;gBACR,SAAS,KAAK,OAAO,IAAI;gBACzB,cAAc,KAAK,YAAY,IAAI;gBACnC,WAAW,KAAK,SAAS,IAAI;gBAC7B,mBAAmB,KAAK,iBAAiB,IAAI;gBAC7C,WAAW,IAAI;gBACf,uDAAuD;gBACvD,WAAW,IAAA,sLAAQ,EAAC,IAAI,QAAQ;YAClC;YACA,SAAS;gBACP,aAAa;oBAAE,SAAS;wBAAE,UAAU;wBAAM,iBAAiB;oBAAK;gBAAE;gBAClE,iBAAiB;gBACjB,MAAM;oBACJ,SAAS;wBACP,WAAW;wBACX,cAAc;wBACd,SAAS;oBACX;gBACF;YACF;QACF;QAEJ,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,YAAY,WAAW;QAAS,GAAG;YAAE,QAAQ;QAAI;IAC9E;IAEA,4BAA4B;IAC5B,IAAI,KAAK,IAAI,KAAK,eAAe,CAAC,KAAK,YAAY,EAAE;QACnD,OAAO,iLAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvF;IACA,IAAI,KAAK,QAAQ,KAAK,OAAO;QAC3B,OAAO,iLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6C,GACtD;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,UACJ,AAAC,KAAK,YAAY,IACf,MAAM,0JAAM,CAAC,UAAU,CAAC,UAAU,CAAC;QAClC,OAAO;YAAE,IAAI,KAAK,YAAY;QAAC;QAC/B,SAAS;YAAE,aAAa;YAAM,iBAAiB;QAAK;IACtD,MACD,MAAM,0JAAM,CAAC,UAAU,CAAC,SAAS,CAAC;QACjC,OAAO;YAAE,eAAe,YAAY,EAAE;QAAC;QACvC,SAAS;YAAE,aAAa;YAAM,iBAAiB;QAAK;IACtD,MACC,MAAM,0JAAM,CAAC,UAAU,CAAC,MAAM,CAAC;QAC9B,MAAM;YACJ,eAAe,YAAY,EAAE;YAC7B,YAAY,YAAY,UAAU;YAClC,QAAQ;YACR,SAAS,KAAK,OAAO,IAAI;YACzB,cAAc,KAAK,YAAY,IAAI;YACnC,WAAW,KAAK,SAAS,IAAI;YAC7B,mBAAmB,KAAK,iBAAiB,IAAI;YAC7C,WAAW,IAAI;YACf,WAAW,IAAA,sLAAQ,EAAC,IAAI,QAAQ;QAClC;QACA,SAAS;YAAE,aAAa;YAAM,iBAAiB;QAAK;IACtD;IAEF,MAAM,eAAe,OAAO,KAAK,KAAK;IACtC,IACE,QAAQ,SAAS,KAAK,QACtB,QAAQ,SAAS,KAAK,aACtB,eAAe,QAAQ,SAAS,EAChC;QACA,OAAO,iLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyD,GAClE;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,MAAM,MAAM,0JAAM,CAAC,GAAG,CAAC,MAAM,CAAC;QAClC,MAAM;YACJ,eAAe,YAAY,EAAE;YAC7B,cAAc,QAAQ,EAAE;YACxB,aAAa,KAAK,EAAE;YACpB,gBAAgB,KAAK,YAAY,CAAC,EAAE;YACpC,WAAW,KAAK,SAAS;YACzB,OAAO;YACP,UAAU,KAAK,QAAQ,IAAI;YAC3B,UAAU,KAAK,QAAQ,IAAI;YAC3B,eAAe,KAAK,aAAa,IAAI;YACrC,QAAQ;QACV;QACA,SAAS;YACP,WAAW;YACX,cAAc;YACd,SAAS;QACX;IACF;IAEA,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE,KAAK,OAAO,KAAK,YAAY,SAAS;IAAE,GAAG;QAAE,QAAQ;IAAI;AACtF"}}]
}