{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/lib/utils.ts"],"sourcesContent":["/* ------------------------------------------------------------------ */\r\n/* Core domain types                                                    */\r\n/* ------------------------------------------------------------------ */\r\n\r\nexport type UserRole = \"customer\" | \"installer\" | \"officer\"\r\n\r\nexport interface User {\r\n  id: string\r\n  role: UserRole\r\n  email: string\r\n  name: string\r\n  status?: \"active\" | \"suspended\"\r\n  verified?: boolean\r\n  phone?: string\r\n  address?: string\r\n  profileImageUrl?: string | null\r\n  createdAt?: string\r\n  organization?: {\r\n    id: string\r\n    name: string\r\n    isRejected?: boolean\r\n  } | null\r\n}\r\nimport { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\nexport function formatCapacityForFiltering(capacity?: string | null): string {\r\n  if (!capacity) return \"\"\r\n\r\n  const text = capacity.toLowerCase().trim()\r\n\r\n  // Extract first number like \"3\", \"3.5\", etc.\r\n  const match = text.match(/(\\d+(\\.\\d+)?)/)\r\n  if (!match) return text\r\n\r\n  let value = Number.parseFloat(match[1])\r\n  if (Number.isNaN(value)) return text\r\n\r\n  // If it's in watts (e.g., \"5000w\"), convert to kW\r\n  const isKw = text.includes(\"kw\")\r\n  const isW = text.includes(\"w\")\r\n  if (isW && !isKw) value = value / 1000\r\n\r\n  // Normalize (remove trailing zeros)\r\n  return String(Number(value.toFixed(2)))\r\n}\r\nexport type InstallerStatus =\r\n  | \"pending\"\r\n  | \"verified\"\r\n  | \"rejected\"\r\n  | \"suspended\"\r\n\r\nexport interface DocumentMeta {\r\n  fileName: string\r\n  url: string\r\n  uploadedAt: string\r\n  mimeType?: string\r\n  sizeKb?: number\r\n}\r\n\r\nexport interface Application {\r\n  id: string\r\n  reference?: string\r\n  customerId: string\r\n  customerName: string\r\n  email?: string\r\n  phone?: string\r\n  address?: string\r\n  connectionPhase?: string\r\n  status:\r\n    | \"pending\"\r\n    | \"under_review\"\r\n    | \"pre_visit_approved\"\r\n    | \"site_visit_scheduled\"\r\n    | \"approved\"\r\n    | \"site_visit_payment_completed\"\r\n    | \"rejected\"\r\n    | \"payment_pending\"\r\n    | \"payment_confirmed\"\r\n    | \"finding_installer\"\r\n    | \"installation_in_progress\"\r\n    | \"installation_complete\"\r\n    | \"final_inspection\"\r\n    | \"agreement_pending\"\r\n    | \"inspection_approved\"\r\n    | \"agreement_sent\"\r\n    | \"customer_signed\"\r\n    | \"installer_signed\"\r\n    | \"officer_final_approved\"\r\n    | \"completed\"\r\n  createdAt: string\r\n  updatedAt: string\r\n  reviewedAt?: string\r\n  siteVisitDate?: string\r\n  rejectionReason?: string\r\n  siteVisitFeePaid?: boolean\r\n  documents: {\r\n    nic?: DocumentMeta\r\n    bankDetails?: DocumentMeta\r\n    electricityBill?: DocumentMeta\r\n    propertyDocument?: DocumentMeta\r\n  }\r\n  technicalDetails: {\r\n    roofType: string\r\n    roofArea: string\r\n    monthlyConsumption: string\r\n    connectionPhase: string\r\n    propertyType?: string\r\n    propertyOwnership?: string\r\n    electricityAccountNumber?: string\r\n    tariffCategory?: string\r\n    roofOrientation?: string\r\n    shading?: string\r\n    desiredCapacity?: string\r\n  }\r\n  selectedInstaller?: {\r\n    id: string\r\n    name: string\r\n    phone?: string | null\r\n    address?: string | null\r\n    packageName?: string\r\n    price?: number\r\n  }\r\n  bidId?: string\r\n  invoices?: Invoice[]\r\n}\r\n\r\nexport interface Installer {\r\n  id: string\r\n  companyName: string\r\n  email: string\r\n  phone: string\r\n  address: string\r\n  description: string\r\n  registrationNumber?: string\r\n  status: InstallerStatus\r\n  verified: boolean\r\n  isRejected?: boolean\r\n  verifiedAt?: string\r\n  rejectionReason?: string\r\n  suspendedReason?: string\r\n  documents: DocumentMeta[]\r\n  packages: SolarPackage[]\r\n  rating: number\r\n  completedInstallations: number\r\n}\r\n\r\nexport interface SolarPackage {\r\n  id: string\r\n  installerId: string\r\n  name: string\r\n  capacity: string\r\n  description?: string\r\n  panelCount: number\r\n  panelType: string\r\n  inverterType?: string\r\n  inverterBrand: string\r\n  installationDays?: number | null\r\n  warranty: string\r\n  price: number\r\n  active?: boolean\r\n  features: string[]\r\n}\r\n\r\nexport interface Bid {\r\n  id: string\r\n  applicationId: string\r\n  installerId: string\r\n  installerName: string\r\n  price: number\r\n  proposal: string\r\n  warranty: string\r\n  estimatedDays: number\r\n  createdAt: string\r\n  status: \"pending\" | \"accepted\" | \"rejected\" | \"expired\"\r\n  packageName?: string\r\n  installerRating?: number\r\n  completedProjects?: number\r\n  contact?: {\r\n    email?: string\r\n    phone?: string\r\n  }\r\n  message?: string\r\n}\r\n\r\nexport interface BidSession {\r\n  id: string\r\n  applicationId: string\r\n  customerId: string\r\n  startedAt: string\r\n  expiresAt: string\r\n  status: \"open\" | \"closed\" | \"expired\"\r\n  bids: Bid[]\r\n  selectedBidId?: string\r\n  bidType?: \"open\" | \"specific\"\r\n  requirements?: string\r\n  maxBudget?: number\r\n  applicationDetails?: {\r\n    address?: string\r\n    capacity?: string\r\n    customerPhone?: string\r\n    customerEmail?: string\r\n    selectedPackageName?: string\r\n    selectedPackagePrice?: string\r\n  }\r\n}\r\n\r\nexport interface Invoice {\r\n  id: string\r\n  applicationId: string\r\n  customerId: string\r\n  customerName?: string\r\n  type: \"authority_fee\" | \"installation\" | \"monthly_bill\"\r\n  amount: number\r\n  status: \"pending\" | \"paid\" | \"overdue\"\r\n  createdAt: string\r\n  paidAt?: string\r\n  dueDate: string\r\n  description: string\r\n  paymentId?: string\r\n  meterReadingId?: string\r\n  pdfUrl?: string\r\n  channel?: \"email\" | \"sms\" | \"in_app\"\r\n  nextAction?: string\r\n}\r\n\r\nexport interface MonthlyBill {\r\n  id: string\r\n  customerId: string\r\n  applicationId: string\r\n  month: number\r\n  year: number\r\n  kwhGenerated: number\r\n  kwhExported: number\r\n  kwhImported: number\r\n  amount: number\r\n  status: \"pending\" | \"paid\" | \"overdue\" | \"credited\"\r\n  createdAt: string\r\n  meterReadingId?: string\r\n  invoiceId?: string\r\n  pdfUrl?: string\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* API helpers                                                          */\r\n/* ------------------------------------------------------------------ */\r\n\r\nasync function handleResponse<T>(response: Response): Promise<T> {\r\n  if (!response.ok) {\r\n    const data = await response.json().catch(() => ({}))\r\n    const message = (data as any)?.error || response.statusText\r\n    throw new Error(message || \"Request failed\")\r\n  }\r\n  return response.json() as Promise<T>\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* Auth                                                                 */\r\n/* ------------------------------------------------------------------ */\r\n\r\nexport async function fetchCurrentUser(): Promise<User | null> {\r\n  const response = await fetch(\"/api/auth/me\", { cache: \"no-store\" })\r\n  if (response.status === 401) return null\r\n  const data = await handleResponse<{ user: User }>(response)\r\n  return data.user\r\n}\r\n\r\nexport async function login(payload: {\r\n  email: string\r\n  password: string\r\n}) {\r\n  const response = await fetch(\"/api/auth/login\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  })\r\n  const data = await handleResponse<{ user: User }>(response)\r\n  return data.user\r\n}\r\n\r\nexport async function register(payload: {\r\n  role: UserRole\r\n  email: string\r\n  password: string\r\n  name: string\r\n  phone?: string\r\n  address?: string\r\n  companyName?: string\r\n  description?: string\r\n}) {\r\n  const response = await fetch(\"/api/auth/register\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  })\r\n  const data = await handleResponse<{ user: User }>(response)\r\n  return data.user\r\n}\r\n\r\nexport async function logout() {\r\n  await fetch(\"/api/auth/logout\", { method: \"POST\" })\r\n}\r\n\r\n/* ------------------------------------------------------------------ */\r\n/* Data fetchers                                                        */\r\n/* ------------------------------------------------------------------ */\r\n\r\nexport async function fetchApplications(): Promise<Application[]> {\r\n  const response = await fetch(\"/api/applications\", { cache: \"no-store\" })\r\n  const data = await handleResponse<{ applications: Application[] }>(response)\r\n  return data.applications\r\n}\r\n\r\nexport async function fetchApplication(\r\n  reference: string,\r\n): Promise<Application | null> {\r\n  const response = await fetch(`/api/applications/${reference}`, {\r\n    cache: \"no-store\",\r\n  })\r\n  if (response.status === 404) return null\r\n  const data = await handleResponse<{ application: Application }>(response)\r\n  return data.application\r\n}\r\n\r\nexport async function fetchInstallers(\r\n  verifiedOnly = true,\r\n): Promise<Installer[]> {\r\n  const url = verifiedOnly\r\n    ? \"/api/installers?verified=true\"\r\n    : \"/api/installers\"\r\n\r\n  const response = await fetch(url, { cache: \"no-store\" })\r\n  const data = await handleResponse<{ installers: Installer[] }>(response)\r\n  return data.installers\r\n}\r\n\r\nexport async function fetchBidSessions(): Promise<BidSession[]> {\r\n  const response = await fetch(\"/api/bids\", { cache: \"no-store\" })\r\n  const data = await handleResponse<{ bidSessions: BidSession[] }>(response)\r\n  return data.bidSessions\r\n}\r\n\r\nexport async function fetchPayments(): Promise<{\r\n  invoices: Invoice[]\r\n  monthlyBills: MonthlyBill[]\r\n}> {\r\n  const response = await fetch(\"/api/payments\", { cache: \"no-store\" })\r\n  return handleResponse(response)\r\n}\r\n\r\nexport async function fetchUsers(): Promise<User[]> {\r\n  const response = await fetch(\"/api/users\", { cache: \"no-store\" })\r\n  const data = await handleResponse<{ users: User[] }>(response)\r\n  return data.users\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,wMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,yMAAI,GAAG;IAE9B,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,+QAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/components/ui/label.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as LabelPrimitive from '@radix-ui/react-label'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,+QAAC,0MAAmB;QAClB,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,+QAAC;QACC,aAAU;QACV,WAAW,IAAA,mJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/app/actions/auth.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { redirect } from \"next/navigation\"\r\nimport { UserRole } from \"@prisma/client\"\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { createAuthSession, hashPassword, verifyPassword } from \"@/lib/auth-server\"\r\n\r\nfunction getString(fd: FormData, key: string) {\r\n  const v = fd.get(key)\r\n  return typeof v === \"string\" ? v.trim() : \"\"\r\n}\r\n\r\nexport async function loginAction(_: unknown, formData: FormData) {\r\n  const email = getString(formData, \"email\").toLowerCase()\r\n  const password = getString(formData, \"password\")\r\n  const redirectTo = getString(formData, \"redirect\") || \"/customer/dashboard\"\r\n\r\n  if (!email || !password) {\r\n    return { error: \"Email and password are required\" }\r\n  }\r\n\r\n  const user = await prisma.user.findUnique({ where: { email } })\r\n  if (!user) return { error: \"Invalid credentials\" }\r\n\r\n  if (user.status === \"suspended\") {\r\n    return { error: \"Account is suspended. Please contact support.\" }\r\n  }\r\n\r\n  const ok = await verifyPassword(password, user.passwordHash)\r\n  if (!ok) return { error: \"Invalid credentials\" }\r\n\r\n  // âœ… uses your existing session/cookie helper\r\n  await createAuthSession(user.id, user.role)\r\n\r\n  const roleRedirect =\r\n    user.role === \"officer\"\r\n      ? \"/officer/dashboard\"\r\n      : user.role === \"installer\"\r\n      ? \"/installer/dashboard\"\r\n      : \"/customer/dashboard\"\r\n\r\n  // If redirect is default/home, go by role\r\n  const finalRedirect =\r\n    redirectTo === \"/\" || redirectTo === \"/customer/dashboard\"\r\n      ? roleRedirect\r\n      : redirectTo\r\n\r\n  redirect(finalRedirect)\r\n}\r\n\r\nexport async function registerAction(_: unknown, formData: FormData) {\r\n  const name = getString(formData, \"name\")\r\n  const email = getString(formData, \"email\").toLowerCase()\r\n  const password = getString(formData, \"password\")\r\n  const confirmPassword = getString(formData, \"confirmPassword\")\r\n\r\n  const roleRaw = getString(formData, \"role\") || \"customer\"\r\n  const phone = getString(formData, \"phone\") || undefined\r\n  const address = getString(formData, \"address\") || undefined\r\n\r\n  if (!name || !email || !password) {\r\n    return { error: \"Missing required fields\" }\r\n  }\r\n\r\n  if (password !== confirmPassword) {\r\n    return { error: \"Passwords do not match\" }\r\n  }\r\n\r\n  if (!Object.values(UserRole).includes(roleRaw as UserRole)) {\r\n    return { error: \"Invalid role\" }\r\n  }\r\n\r\n  const role = roleRaw as UserRole\r\n\r\n  const existing = await prisma.user.findUnique({ where: { email } })\r\n  if (existing) return { error: \"Email already registered\" }\r\n\r\n  const passwordHash = await hashPassword(password)\r\n\r\n  let organizationId: string | undefined\r\n\r\n  if (role === UserRole.installer) {\r\n    const companyName = getString(formData, \"companyName\")\r\n    const description = getString(formData, \"description\") || undefined\r\n\r\n    const org = await prisma.organization.create({\r\n      data: {\r\n        name: companyName || name,\r\n        description,\r\n        phone,\r\n        address,\r\n        verified: false,\r\n      },\r\n    })\r\n\r\n    organizationId = org.id\r\n  }\r\n\r\n  const user = await prisma.user.create({\r\n    data: {\r\n      name,\r\n      email,\r\n      passwordHash,\r\n      role,\r\n      status: \"active\",\r\n      phone,\r\n      address,\r\n      organizationId,\r\n      verified: role !== UserRole.installer,\r\n    },\r\n  })\r\n\r\n  await createAuthSession(user.id, user.role)\r\n\r\n  redirect(\r\n    role === UserRole.installer\r\n      ? \"/installer/dashboard\"\r\n      : role === UserRole.officer\r\n      ? \"/officer/dashboard\"\r\n      : \"/customer/dashboard\",\r\n  )\r\n}"],"names":[],"mappings":";;;;;;;IAYsB,cAAA,WAAA,GAAA,IAAA,gRAAA,EAAA,8CAAA,qQAAA,EAAA,KAAA,GAAA,2QAAA,EAAA"}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dew/404SquadSolarConnect/final/app/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useActionState, useState } from \"react\"\r\nimport Link from \"next/link\"\r\nimport { useSearchParams } from \"next/navigation\"\r\nimport { Sun, Eye, EyeOff } from \"lucide-react\"\r\nimport { useLanguage } from \"@/context/LanguageContext\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport {\r\nCard,\r\nCardContent,\r\nCardDescription,\r\nCardHeader,\r\nCardTitle,\r\n} from \"@/components/ui/card\"\r\n\r\nimport { loginAction } from \"@/app/actions/auth\"\r\n\r\nexport default function LoginPage() {\r\nconst { t } = useLanguage()\r\nconst searchParams = useSearchParams()\r\nconst redirect = searchParams.get(\"redirect\") || \"/customer/dashboard\"\r\nconst suspended = searchParams.get(\"suspended\") === \"1\"\r\n\r\nconst [state, formAction, pending] = useActionState(loginAction, null)\r\nconst [showPassword, setShowPassword] = useState(false)\r\n\r\nreturn (\r\n<div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\r\n<div className=\"w-full max-w-md\">\r\n<Link href=\"/\" className=\"flex items-center justify-center gap-2 mb-8\" >\r\n<div className=\"w-10 h-10 rounded-lg bg-emerald-500 flex items-center justify-center\">\r\n<Sun className=\"w-6 h-6 text-white\" />\r\n</div>\r\n<span className=\"text-xl font-semibold text-foreground\">\r\nCEB Solar\r\n</span>\r\n</Link>\r\n\r\ntext\r\n\r\n    <Card className=\"border-border\">\r\n      <CardHeader className=\"text-center\">\r\n        <CardTitle className=\"text-2xl text-foreground\">\r\n          {t(\"welcomeBack\")}\r\n        </CardTitle>\r\n        <CardDescription>\r\n          {t(\"loginSubtitle\")}\r\n        </CardDescription>\r\n      </CardHeader>\r\n\r\n      <CardContent>\r\n        <form action={formAction} className=\"space-y-4\">\r\n          <input type=\"hidden\" name=\"redirect\" value={redirect} />\r\n\r\n          {suspended && (\r\n            <div className=\"p-3 rounded-lg bg-destructive/10 text-destructive text-sm\">\r\n              {t(\"accountSuspended\")}\r\n            </div>\r\n          )}\r\n\r\n          {state?.error && (\r\n            <div className=\"p-3 rounded-lg bg-destructive/10 text-destructive text-sm\">\r\n              {state.error}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"email\">{t(\"email\")}</Label>\r\n            <Input\r\n              id=\"email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder={t(\"enterEmail\")}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"password\">{t(\"password\")}</Label>\r\n            <div className=\"relative\">\r\n              <Input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                placeholder={t(\"enterPassword\")}\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword((prev) => !prev)}\r\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\r\n              >\r\n                {showPassword ? (\r\n                  <EyeOff className=\"w-4 h-4\" />\r\n                ) : (\r\n                  <Eye className=\"w-4 h-4\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            className=\"w-full bg-emerald-500 hover:bg-emerald-600 text-white\"\r\n            disabled={pending}\r\n          >\r\n            {pending ? t(\"signingIn\") : t(\"signInTo\")}\r\n          </Button>\r\n\r\n          <div className=\"text-center text-sm text-muted-foreground\">\r\n            {t(\"noAccount\")}{\" \"}\r\n            <Link\r\n              href=\"/register\"\r\n              className=\"text-emerald-500 hover:text-emerald-600 font-medium\"\r\n            >\r\n              {t(\"register\")}\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  </div>\r\n</div>\r\n)\r\n}"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAQA;AApBA;;;;;;;;;;;;AAsBe,SAAS;IACxB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,2KAAW;IACzB,MAAM,eAAe,IAAA,sLAAe;IACpC,MAAM,WAAW,aAAa,GAAG,CAAC,eAAe;IACjD,MAAM,YAAY,aAAa,GAAG,CAAC,iBAAiB;IAEpD,MAAM,CAAC,OAAO,YAAY,QAAQ,GAAG,IAAA,wPAAc,EAAC,sMAAW,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,kPAAQ,EAAC;IAEjD,qBACA,+QAAC;QAAI,WAAU;kBACf,cAAA,+QAAC;YAAI,WAAU;;8BACf,+QAAC,wMAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACzB,+QAAC;4BAAI,WAAU;sCACf,cAAA,+QAAC,wOAAG;gCAAC,WAAU;;;;;;;;;;;sCAEf,+QAAC;4BAAK,WAAU;sCAAwC;;;;;;;;;;;;gBAGjD;8BAIH,+QAAC,kKAAI;oBAAC,WAAU;;sCACd,+QAAC,wKAAU;4BAAC,WAAU;;8CACpB,+QAAC,uKAAS;oCAAC,WAAU;8CAClB,EAAE;;;;;;8CAEL,+QAAC,6KAAe;8CACb,EAAE;;;;;;;;;;;;sCAIP,+QAAC,yKAAW;sCACV,cAAA,+QAAC;gCAAK,QAAQ;gCAAY,WAAU;;kDAClC,+QAAC;wCAAM,MAAK;wCAAS,MAAK;wCAAW,OAAO;;;;;;oCAE3C,2BACC,+QAAC;wCAAI,WAAU;kDACZ,EAAE;;;;;;oCAIN,OAAO,uBACN,+QAAC;wCAAI,WAAU;kDACZ,MAAM,KAAK;;;;;;kDAIhB,+QAAC;wCAAI,WAAU;;0DACb,+QAAC,oKAAK;gDAAC,SAAQ;0DAAS,EAAE;;;;;;0DAC1B,+QAAC,oKAAK;gDACJ,IAAG;gDACH,MAAK;gDACL,MAAK;gDACL,aAAa,EAAE;gDACf,QAAQ;;;;;;;;;;;;kDAIZ,+QAAC;wCAAI,WAAU;;0DACb,+QAAC,oKAAK;gDAAC,SAAQ;0DAAY,EAAE;;;;;;0DAC7B,+QAAC;gDAAI,WAAU;;kEACb,+QAAC,oKAAK;wDACJ,IAAG;wDACH,MAAK;wDACL,MAAM,eAAe,SAAS;wDAC9B,aAAa,EAAE;wDACf,QAAQ;;;;;;kEAEV,+QAAC;wDACC,MAAK;wDACL,SAAS,IAAM,gBAAgB,CAAC,OAAS,CAAC;wDAC1C,WAAU;kEAET,6BACC,+QAAC,qPAAM;4DAAC,WAAU;;;;;iFAElB,+QAAC,wOAAG;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;kDAMvB,+QAAC,sKAAM;wCACL,MAAK;wCACL,WAAU;wCACV,UAAU;kDAET,UAAU,EAAE,eAAe,EAAE;;;;;;kDAGhC,+QAAC;wCAAI,WAAU;;4CACZ,EAAE;4CAAc;0DACjB,+QAAC,wMAAI;gDACH,MAAK;gDACL,WAAU;0DAET,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASjB"}}]
}